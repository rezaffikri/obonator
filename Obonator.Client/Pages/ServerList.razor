@page "/serverlist"

@attribute [Authorize(Roles = "admin, se, qa")]
<nav class="obon-breadcrumb is-small" aria-label="breadcrumbs">
    <ul>
        <li>
            <a href="#">
                Obonator
            </a>
        </li>
        <li class="is-active">
            <a href="#" aria-current="page">Server</a>
        </li>
    </ul>
</nav>

<div class="obon-box">
    <div class="obon-box-header">
        <h1 class="subtitle has-text-centered">
            Server List
        </h1>
    </div>
    <div class="obon-box-body">
        <div class="obon-scrollbar is-x">
            <div class="field is-horizontal">
                <DataGrid TItem="ServerListModel"
                          Data="@serverListModels"
                          Sortable="false"
                          Bordered="true"
                          Striped="true"
                          Filterable="true"
                          Narrow="true">
                    <DataGridCommandColumn TItem="ServerListModel" />
                    <DataGridColumn TItem="ServerListModel" Field="@nameof(ServerListModel.ServerId)" Caption="#" Filterable="true" />
                    <DataGridColumn TItem="ServerListModel" Field="@nameof(ServerListModel.ServerName)" Caption="Server Name" Filterable="true" />
                    <DataGridColumn TItem="ServerListModel" Field="@nameof(ServerListModel.ServerIp)" Caption="Ip Address" Filterable="true" />
                    <DataGridColumn TItem="ServerListModel" Field="@nameof(ServerListModel.Keterangan)" Caption="Desc" Filterable="true" />
                </DataGrid>
            </div>
        </div>
    </div>
</div>

@code{
    List<ServerListModel> serverListModels = new List<ServerListModel>();

    protected override Task OnInitializedAsync()
    {
        try
        {
            int id = 1;
            ServerListModel serverList = new ServerListModel();
            serverList.ServerId = id;
            serverList.ServerName = "Universe";
            serverList.ServerIp = "52.187.163.21";
            serverList.Keterangan = "";
            serverListModels.Add(serverList);
        }
        catch (Exception ex)
        {
            toastService.ShowError("Error: " + ex.Message + ex.StackTrace, "FAIL");
        }

        return base.OnInitializedAsync();
    }
}

